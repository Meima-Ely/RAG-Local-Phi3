<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Local PDF/Word Analyst — Chat</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="styles.css">
  <script defer src="app.js?v=21"></script>
</head>
<body>
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand">
      <img src="logo.jpg" class="logoimg" alt="Logo" onerror="this.style.display='none'"/>
      <div>
        <h1>Local </h1>
        <h2>DocuGuide</h2>
      </div>
    </div>

    <div class="card">
      <div class="row">
        <label class="small">API Base</label>
        <input id="base" type="text" value="http://127.0.0.1:8000" />
        <button id="btnPing" class="btn ghost">Check</button>
      </div>

      <div class="row" style="margin-top:10px">
        <button id="btnReset" class="btn ghost">Reset DB</button>
      </div>
      <p class="small" style="opacity:.8;margin-top:10px">
        Language is detected automatically from your document (Arabic / French / English). Numbers used for citations are hidden

      </p>
      <p class="arabic" style="opacity: .8;margin-top: 10px">
        يتم اكتشاف اللغة تلقائيًا من مستندك (العربية / الفرنسية / الإنجليزية). الأرقام المستخدمة للاستشهادات تكون مخفية
      </p> 
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <div class="topbar">
      <div class="status" id="status">
        <span class="dot"></span><span id="statusText">Checking…</span>
      </div>
    </div>

    <div id="chat" class="chat"></div>

    <div class="composer">
      <div class="box">
        <button id="attach" class="iconbtn" title="Attach PDF/DOC/DOCX">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.44 11.05l-9.19 9.19a6 6 0 1 1-8.49-8.49l9.19-9.19a4 4 0 1 1 5.66 5.66L9.88 17.75a2 2 0 1 1-2.83-2.83l8.49-8.49"/>
          </svg>
        </button>
        <input id="file" type="file"
               accept=".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
               style="display:none" />
        <textarea id="q" dir="auto" placeholder="اكتب/pose/ask… (analysis + recommendations)"></textarea>
        <button id="ask" class="btn" style="min-width:110px" disabled>Ask</button>
      </div>
      <div class="hint"><span id="fileHint" style="opacity:.85"></span></div>
    </div>
  </main>
  <div id="resetModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="resetTitle">
  <div class="modal-card">
    <div id="resetTitle" class="modal-title">Reset database?</div>
    <div class="modal-text">This clears the local vector index. You can’t undo this.</div>
    <div class="modal-actions">
      <button id="cancelReset" class="btn cancel">Cancel</button>
      <button id="confirmReset" class="btn danger">Yes, reset</button>
    </div>
  </div>
</div>

</body>
</html>
