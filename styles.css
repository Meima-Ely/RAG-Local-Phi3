/* ===== THEME ===== */
:root{
  --bg:#070B16; --bg2:#0E1831; --card:#0E1324; --glass:rgba(14,19,36,.55);
  --stroke:#223255; --edge:#2A3A66; --text:#E8EEFF; --muted:#A6B2D1;
  --accent:#7C9CFB; --accent2:#9AD6FF; --ok:#34D399; --warn:#F5B70B; --err:#F87171;
  --bubble:#213152; --user:#1A2848; --bot:#0c1326;
  --radius:14px; --shadow-lg: 0 18px 40px rgba(0,0,0,.35);
  --shadow-md: 0 10px 24px rgba(0,0,0,.28); --ring: 0 0 0 2px #213152, 0 0 0 4px rgba(124,156,251,.2);
}

/* ===== PAGE ===== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--text);
  font:15px/1.5 system-ui, Segoe UI, Roboto, Arial, sans-serif;
  display:flex; gap:14px; align-items:stretch;
  background:
    radial-gradient(1200px 700px at 8% -10%, #1b2760 0%, transparent 55%),
    radial-gradient(950px 520px at 105% 5%, #0c4a6e 0%, transparent 45%),
    linear-gradient(180deg,var(--bg),var(--bg2) 60%, #070B16 100%);
  background-attachment: fixed; overflow:hidden;
}
@media (prefers-reduced-motion: no-preference){
  body{ animation:bgPulse 12s ease-in-out infinite alternate; }
  @keyframes bgPulse{ from { filter:hue-rotate(0deg) } to { filter:hue-rotate(-6deg) } }
}

/* ===== SIDEBAR ===== */
.sidebar{
  width:320px; max-width:100%; padding:16px;
  border-right:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg, rgba(12,18,38,.65), rgba(8,12,26,.45));
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
}
.brand{display:flex;align-items:center;gap:12px;margin-bottom:18px}
.brand img{ width:100px;height:100px;border-radius:12px;object-fit:cover; box-shadow:var(--shadow-md) }
.brand h1{margin:0;font-size:22px;letter-spacing:.3px}
.brand h2{margin:0;margin-top:2px;font-size:18px;color:#d6e1ff;opacity:.9}

.card{
  border:1px solid var(--edge); border-radius:16px; padding:14px;
  background:linear-gradient(180deg, rgba(20,26,48,.85), rgba(13,17,34,.75));
  box-shadow:var(--shadow-md);
}
.row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
label.small{font-size:12px;color:var(--muted)}

input[type="text"], select, textarea{
  width:100%; background:rgba(9,14,30,.9); border:1px solid #213255; color:var(--text);
  padding:10px 12px; border-radius:12px; outline:none; transition:.2s border, .2s box-shadow, .2s transform;
}
input[type="text"]:focus, select:focus, textarea:focus{
  border-color:var(--accent); box-shadow: var(--ring); transform: translateZ(0);
}
select{appearance:none; background-image: linear-gradient(45deg,transparent 50%, var(--muted) 50%), linear-gradient(135deg, var(--muted) 50%, transparent 50%);
  background-position: calc(100% - 18px) calc(50% - 3px), calc(100% - 12px) calc(50% - 3px);
  background-size:6px 6px, 6px 6px; background-repeat:no-repeat;}

/* ---------- Shared button polish ---------- */
.btn{
  position: relative;
  cursor: pointer;
  border: none;
  border-radius: 12px;
  padding: 10px 14px;
  font-weight: 700;
  letter-spacing: .2px;
  transition: transform .14s ease, box-shadow .2s ease, filter .2s ease, background .2s ease, border-color .2s ease;
  will-change: transform, box-shadow, filter;
}

/* Focus ring (keyboard accessibility) */
.btn:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 2px rgba(33, 50, 85, .9),
    0 0 0 6px rgba(124,156,251,.28);
  transform: translateY(-1px);
}

/* Subtle press */
.btn:active{ transform: translateY(0) scale(.98); }

/* Disabled */
.btn:disabled{ opacity:.55; cursor:not-allowed; transform:none; box-shadow:none; }

/* ---------- Ghost variant base ---------- */
.btn.ghost{
  background: linear-gradient(180deg, rgba(11,18,34,.35), rgba(11,18,34,.55));
  color: var(--text);
  border: 1px solid #2a3a66;
  box-shadow: none;
  backdrop-filter: blur(2px);
}
.btn.ghost:hover{
  box-shadow: 0 8px 22px rgba(124,156,251,.18);
}

/* ---------- CHECK (Ping) = success-ghost ---------- */
#btnPing.btn.ghost{
  --success: #10b981;           /* emerald-500 */
  --success-2: #34d399;         /* emerald-400 */
  color: var(--success);
  border-color: color-mix(in oklab, var(--success) 70%, white);
}
#btnPing.btn.ghost:hover{
  border-color: var(--success-2);
  background:
    radial-gradient(220px 150px at 30% -20%, color-mix(in oklab, var(--success) 16%, transparent) 0%, transparent 70%),
    linear-gradient(180deg, rgba(11,18,34,.45), rgba(11,18,34,.75));
  box-shadow: 0 10px 28px color-mix(in oklab, var(--success) 20%, transparent);
}
#btnPing.btn.ghost:active{
  filter: saturate(1.05);
}

/* ---------- RESET DB = danger-ghost (clear warning) ---------- */
/* Remove/override the 40% line */
#btnReset.btn.ghost{
  --danger: #ef4444;
  --danger-2: #f87171;
  color: var(--danger);
  border-color: color-mix(in oklab, var(--danger) 70%, white);
  /* width: 40%;  <-- delete this line */
}

/* Make BOTH buttons full width */
#btnPing.btn.ghost,
#btnReset.btn.ghost{
  width: 100%;
  display: block;
}


#btnReset.btn.ghost:hover{
  border-color: var(--danger-2);
  background:
    radial-gradient(220px 150px at 30% -20%, color-mix(in oklab, var(--danger) 16%, transparent) 0%, transparent 70%),
    linear-gradient(180deg, rgba(11,18,34,.45), rgba(11,18,34,.75));
  box-shadow: 0 10px 28px color-mix(in oklab, var(--danger) 20%, transparent);
}
#btnReset.btn.ghost:active{
  filter: saturate(1.05);
}

/* ---------- Optional: add left icon spacing if you insert SVGs ---------- */
.btn svg{ vertical-align: -2px; margin-right: 8px; }


/* ===== MAIN ===== */
.main{flex:1;display:flex;flex-direction:column;min-width:0;overflow:hidden}
.topbar{
  display:flex;align-items:center;justify-content:space-between; padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg, rgba(16,21,42,.55), rgba(9,12,28,.45));
  backdrop-filter: blur(8px);
}
.status{ font-size:13px; color:var(--muted); /* <- text color now */
  display:inline-flex; align-items:center; gap:8px; padding:6px 10px;
  border:1px solid var(--edge); border-radius:999px; background:rgba(13,18,34,.55);
}
.status .dot{ width:8px;height:8px;border-radius:50%; background:#888; }
.ok .dot{ background:var(--ok); animation: ping 1.6s  }
.warn .dot{ background:var(--warn) }
.err .dot{ background:var(--err) }

.ok .dot{background:var(--ok); animation: ping 1.6s cubic-bezier(.2,0,.2,1) infinite}
.warn .dot{background:var(--warn)}
.err .dot{background:var(--err)}
@keyframes ping{ 0%{ box-shadow:0 0 0 0 rgba(52, 211, 153, 0.6) } 100%{ box-shadow:0 0 0 10px rgba(52,211,153,0) }}

/* ===== CHAT ===== */
.chat{
  flex:1; overflow:auto; padding:20px 18px; display:flex; flex-direction:column; gap:12px; scroll-behavior: smooth;
}
.chat::-webkit-scrollbar{ width:10px }
.chat::-webkit-scrollbar-thumb{ background:#1f2d4f; border-radius:10px; border:2px solid transparent; background-clip:padding-box }
.chat::-webkit-scrollbar-thumb:hover{ background:#2a3a66 }

.msg{display:flex;gap:10px;align-items:flex-start;max-width:980px}
.msg.user{align-self:flex-end;flex-direction:row-reverse}
.avatar{
  width:30px;height:30px;border-radius:50%;
  background:linear-gradient(135deg,#22345f,#152240); border:1px solid #22345f;
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
}
.avatar.bot{ background:linear-gradient(135deg,#172241,#0c152f); border-color:#1b2a51 }

.bubble{
  border:1px solid var(--bubble); padding:12px 14px;border-radius:var(--radius);
  background:linear-gradient(180deg, rgba(8,13,31,.85), rgba(6,10,22,.92)); box-shadow: var(--shadow-lg);
  max-width:min(100%,780px); white-space:pre-wrap; word-wrap:break-word; unicode-bidi:plaintext; line-height:1.6;
}
.msg.user .bubble{
  background:linear-gradient(180deg, rgba(26,40,72,.95), rgba(22,34,60,.98)); border-color:#2a3a66;
}
.bubble strong, .bubble b{ color:#eaf1ff }
.bubble a{ color:#9ad6ff; text-decoration:none; border-bottom:1px dashed rgba(154,214,255,.55) }
.bubble a:hover{ text-decoration:underline }

@media (prefers-reduced-motion: no-preference){
  .msg .bubble{ animation: pop .18s ease-out }
  @keyframes pop{ from{ transform: translateY(4px); opacity:.0 } to{ transform: translateY(0); opacity:1 } }
}

/* ===== COMPOSER ===== */
.composer{
  padding:14px 16px; border-top:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg, rgba(14,19,36,.8), rgba(9,12,24,.85)); backdrop-filter: blur(8px);
}
.composer .box{
  display:flex;gap:10px;align-items:flex-end; border:1px solid var(--edge);
  border-radius:16px; padding:10px; background:linear-gradient(180deg, rgba(10,15,30,.75), rgba(10,15,30,.9));
  box-shadow: var(--shadow-md);
}
textarea{
  resize:none;height:52px;min-height:52px;max-height:200px;flex:1;
  background:#0b1220;border:1px solid #203055;color:var(--text);
  border-radius:12px;padding:12px;outline:none; unicode-bidi:plaintext; transition:.2s border, .2s box-shadow;
}
textarea:focus{ border-color:var(--accent); box-shadow: var(--ring); }
.iconbtn{
  display:inline-flex;align-items:center;justify-content:center; width:44px;height:44px;border-radius:12px;
  border:1px solid #203055;background:#0b1220;color:#cfe0ff;cursor:pointer;
  transition: .18s border, .18s transform, .18s color, .18s box-shadow;
}
.iconbtn:hover{border-color:#7c9cfb; color:#ffffff; box-shadow:0 6px 18px rgba(124,156,251,.25)}
.iconbtn:active{ transform: scale(.97) }

.hint{margin-top:6px; font-size:12px; color:#a6b2d1}

/* ===== SPINNER ===== */
.spinner{
  display:inline-block;width:18px;height:18px;border:3px solid rgba(255,255,255,.22);
  border-top-color:#9dd1ff;border-radius:50%;animation:spin 1s linear infinite
}
@keyframes spin{to{transform:rotate(360deg)}}

/* ===== RESPONSIVE ===== */
@media (max-width: 980px){
  body{ gap:8px }
  .brand h1{font-size:20px}
  .brand h2{font-size:16px}
}
@media (max-width: 860px){
  body{ flex-direction:column; overflow:auto }
  .sidebar{ width:100%; border-right:none; border-bottom:1px solid rgba(255,255,255,.06);
    position:sticky; top:0; z-index:20; }
  .main{ min-height: calc(100vh - 260px) }
}
@media (max-width: 560px){
  .sidebar{ padding:12px }
  .card{ padding:12px }
  .topbar, .composer{ padding:10px 12px }
  .composer .box{ padding:8px }
  .msg{ max-width: 100% }
}

/* preserve newlines */
.assistant-message, .message-text { white-space: pre-wrap; line-height: 1.6; }
/* style only that sidebar note */
.sidebar .card p.small{
  color: #66ffa1;          /* pick any color you want */
  opacity: .95; 
  font-size: 13px;           /* optional: tweak transparency */
}
/* Target that Arabic note inside the sidebar card */
.sidebar .card p.arabic {
  color: #c266ff;       /* your new color */
  opacity: .95;         /* you can also move opacity here and remove inline style */
  direction: rtl;       /* optional: make it right-to-left */
  text-align: start;    /* keeps alignment natural for RTL */
  font-size: 13px;      /* optional: tweak size if you want */
}
/* Brand title block */
.brand h1,
.brand h2{
  margin: 0;
  line-height: 1.05;
}

/* "Local" */
.brand h1{
  font-size: 28px;                 /* adjust as you like */
  font-weight: 800;
  letter-spacing: .4px;
  color: var(--text);               /* from your theme */
  opacity: .95;
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}

/* "DocuGuide" */
.brand h2{
  font-size: 24px;                  /* slightly smaller than h1 */
  font-weight: 800;
  letter-spacing: .3px;
  /* glossy gradient text */
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  /* soft outer glow for dark background */
  filter: drop-shadow(0 6px 18px rgba(124,156,251,.28));
  margin-top: 2px;
}

/* Optional: tighter layout when image is bigger */
.brand{
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Responsive tweaks */
@media (max-width: 1000px){
  .brand h1{ font-size: 30px }
  .brand h2{ font-size: 30px }
}
@media (max-width: 560px){
  .brand h1{ font-size: 22px }
  .brand h2{ font-size: 18px }
}
/* Text & border/background by state */
.status.ok{
  color: var(--ok);                               /* text “Connected” */
  border-color: color-mix(in oklab, var(--ok) 45%, white);
  background: linear-gradient(180deg, rgba(13,26,22,.45), rgba(13,26,22,.25));
}
.status.warn{
  color: var(--warn);
  border-color: color-mix(in oklab, var(--warn) 45%, white);
  background: linear-gradient(180deg, rgba(36,28,6,.45), rgba(36,28,6,.25));
}
.status.err{
  color: var(--err);
  border-color: color-mix(in oklab, var(--err) 45%, white);
  background: linear-gradient(180deg, rgba(36,9,12,.45), rgba(36,9,12,.25));
}

/* (Optional) only color the word, keep the pill neutral */
.status.ok #statusText{ color: var(--ok); }
.status.warn #statusText{ color: var(--warn); }
.status.err #statusText{ color: var(--err); }
/* ========== RESET DB: eye-catching danger button ========== */
#btnReset.btn.ghost{
  --danger: #ef4444;
  --danger-2: #f87171;
  --danger-3: #ffb4b4;
  color: white;                      /* stronger contrast */
  background:
    linear-gradient(180deg, rgba(255, 64, 64, .10), rgba(255, 64, 64, .20));
  border-color: color-mix(in oklab, var(--danger) 70%, white);
  box-shadow:
    0 8px 28px rgba(239, 68, 68, .20),
    0 0 0 0 rgba(239, 68, 68, .0);
  position: relative;
  isolation: isolate;
  width: 100%;
}

#btnReset.btn.ghost::before{
  content: "⚠";
  font-size: 14px;
  margin-right: 8px;
}

#btnReset.btn.ghost:hover{
  background:
    radial-gradient(220px 150px at 30% -20%, color-mix(in oklab, var(--danger) 24%, transparent) 0%, transparent 70%),
    linear-gradient(180deg, rgba(255,64,64,.14), rgba(255,64,64,.24));
  border-color: var(--danger-2);
  box-shadow:
    0 12px 36px rgba(239, 68, 68, .28),
    0 0 0 6px rgba(239, 68, 68, .10);
  transform: translateY(-1px);
}

#btnReset.btn.ghost:active{
  transform: translateY(0) scale(.98);
  filter: saturate(1.06);
}

/* subtle, continuous alert pulse */
@media (prefers-reduced-motion: no-preference){
  #btnReset.btn.ghost{
    animation: resetPulse 2.6s ease-in-out infinite;
  }
  @keyframes resetPulse {
    0%   { box-shadow: 0 8px 28px rgba(239, 68, 68, .18), 0 0 0 0 rgba(239,68,68,.0) }
    60%  { box-shadow: 0 10px 32px rgba(239, 68, 68, .28), 0 0 0 10px rgba(239,68,68,.08) }
    100% { box-shadow: 0 8px 28px rgba(239, 68, 68, .18), 0 0 0 0 rgba(239,68,68,.0) }
  }
}

/* ========== CENTERED CONFIRM MODAL ========== */
.modal{
  position: fixed; inset: 0;
  display: none;                     /* toggle with .open */
  align-items: center; justify-content: center;
  padding: 20px;
  background: linear-gradient(180deg, rgba(5,8,18,.55), rgba(5,8,18,.65));
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  z-index: 1000;
}

.modal.open{ display: flex; }

.modal-card{
  width: min(280px,34vw 420px);
  border-radius: 18px;
  border: 1px solid color-mix(in oklab, #ef4444 28%, #223255);
  background:
    radial-gradient(700px 320px at 20% -10%, rgba(255, 75, 75, .10), transparent 70%),
    linear-gradient(180deg, rgba(14,19,36,.96), rgba(10,14,28,.98));
  box-shadow:
    0 22px 60px rgba(0,0,0,.45),
    0 12px 36px rgba(239, 68, 68, .18);
  padding: 18px 18px 14px;
  color: var(--text);
  transform: translateY(8px) scale(.98);
  opacity: 0;
}

.modal.open .modal-card{
  animation: modalIn .18s ease-out forwards;
}

@keyframes modalIn{
  to { transform: translateY(0) scale(1); opacity: 1; }
}

.modal-title{
  display: flex; align-items: center; gap: 10px;
  font-weight: 800; font-size: 18px; margin: 4px 2px 6px;
  color: color-mix(in oklab, white 92%, #ffd8d8);
}
.modal-title::before{
  content: "⚠";
  width: 28px; height: 28px; display: grid; place-items: center;
  border-radius: 8px;
  color: #fff;
  background: linear-gradient(180deg, #ef4444, #b91c1c);
  box-shadow: 0 6px 16px rgba(239, 68, 68, .35);
  font-size: 16px;
}

.modal-text{
  margin: 8px 2px 14px;
  color: #ffd8d8;
  opacity: .95;
  line-height: 1.6;
}

.modal-actions{
  display: flex; gap: 10px; justify-content: flex-end; flex-wrap: wrap;
}

/* buttons inside modal */
.btn.cancel{
  background: linear-gradient(180deg, rgba(11,18,34,.35), rgba(11,18,34,.55));
  border: 1px solid #2a3a66; color: var(--text);
}
.btn.cancel:hover{ box-shadow: 0 6px 18px rgba(124,156,251,.18) }

.btn.danger{
  color: white;
  background: linear-gradient(180deg, #ef4444, #b91c1c);
  border: 1px solid color-mix(in oklab, #ef4444 70%, white);
  box-shadow: 0 10px 28px rgba(239, 68, 68, .3);
}
.btn.danger:hover{
  filter: brightness(1.05);
  box-shadow: 0 12px 36px rgba(239, 68, 68, .38);
}



